!function e(t,i,o){function r(s,n){if(!i[s]){if(!t[s]){var l="function"==typeof require&&require;if(!n&&l)return l(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var d=i[s]={exports:{}};t[s][0].call(d.exports,function(e){var i=t[s][1][e];return r(i?i:e)},d,d.exports,e,t,i,o)}return i[s].exports}for(var a="function"==typeof require&&require,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(e,t,i){var o=wp.media.controller.Library.extend({defaults:_.defaults({id:"ii",title:"Image Source",multiple:!1,content:"getty",menu:"default",router:"ii",toolbar:"ii-toolbar",searchable:!0,filterable:!1,sortable:!1,autoSelect:!0,describe:!1,contentUserSetting:!0,syncSelection:!1,priority:800},wp.media.controller.Library.prototype.defaults),initialize:function(){this.get("library")||this.set("library",wp.media.query({ii:!0})),wp.media.controller.Library.prototype.initialize.apply(this,arguments)}});t.exports=o},{}],2:[function(e,t,i){var o=e("./controllers/image-provider-controller.js"),r=e("./models/image-provider-photos.js"),a=e("./views/browser/image-provider-photos.js"),s=wp.media.view.MediaFrame.Post.prototype.createStates,n=wp.media.view.MediaFrame.Select.prototype.bindHandlers;_.extend(wp.media.view.MediaFrame.prototype,{ii:{activate:function(){var e=_.first(this.views.get(".media-frame-router")),t={};t.getty={text:"Getty Images",priority:60},e.set(t),this.content.mode("getty")},createToolbar:function(){var e=this;this.toolbar.set(new wp.media.view.Toolbar({controller:this,items:{insert:{style:"primary",text:"Insert the Getty",priority:80,requires:{library:!0,selection:!0},click:function(){var t=e.state();t.get("selection");e.close()}}}}))},loadGetty:function(){var e=this.state(),t=e.get("image_crate_photos");_.isUndefined(t)&&(t=new r(null,{props:{query:!0,category:"generic"}}),e.set("image_crate_photos",t)),this.content.set(new a({controller:this,collection:t}))},loadUSAT:function(){console.log("usat ready")}}}),wp.media.view.MediaFrame.Select.prototype.bindHandlers=function(){n.apply(this,arguments),this.on("router:create:ii",this.createRouter,this),this.on("router:activate:ii",this.ii.activate,this),this.on("router:deactivate:ii",this.deactivate,this),this.on("toolbar:create:ii-toolbar",this.ii.createToolbar,this),this.on("content:render:getty",this.ii.loadGetty,this),this.on("content:render:usatoday",this.ii.loadUSAT,this)},wp.media.view.MediaFrame.Post.prototype.createStates=function(){s.apply(this,arguments),this.states.add(new o)}},{"./controllers/image-provider-controller.js":1,"./models/image-provider-photos.js":4,"./views/browser/image-provider-photos.js":6}],3:[function(e,t,i){var o=wp.media.model.Query.extend({sync:function(e,t,i){var o;return i=i||{},i.context=this,i.data=_.extend(i.data||{},{action:"image_implementor_get"}),o=_.clone(this.args),-1!==o.posts_per_page&&(o.paged=Math.round(this.length/o.posts_per_page)+1),i.data.query=o,wp.media.ajax(i)}},{get:function(){var e=[];return function(t,i){var r,a=o,s={},n=!!t.cache||_.isUndefined(t.cache);return delete t.query,delete t.cache,_.each(t,function(e,t){_.isNull(e)||(s[t]=e)}),_.defaults(s,a.defaultArgs),n?r=_.find(e,function(e){return _.isEqual(e.args,s)}):e=[],r||(r=new a([],_.extend(i||{},{props:t,args:s})),e.push(r)),r}}()});t.exports=o},{}],4:[function(e,t,i){var o=e("./image-provider-photos-query"),r=wp.media.model.Attachments.extend({initialize:function(e,t){wp.media.model.Attachments.prototype.initialize.call(this,e,t),this.StockPhotosProps=new Backbone.Model,this.StockPhotosProps.set("importing",!1),this.StockPhotosProps.set("previewing",!1)},_requery:function(e){var t;this.props.get("query")&&(t=this.props.toJSON(),t.cache=!0!==e,this.mirror(o.get(t)))}});t.exports=r},{"./image-provider-photos-query":3}],5:[function(e,t,i){var o=wp.media.view.Attachment.extend({initialize:function(){wp.media.view.Attachment.prototype.initialize.apply(this,arguments);var e=this.options.selection;console.log(e)},render:function(){return wp.media.view.Attachment.prototype.render.apply(this,arguments),this},imageSize:function(e){wp.media.view.Attachment.prototype.imageSize.apply(this,arguments);var t=this.model.get("sizes");return e=e||"thumbnail",t&&(t[e]?matched=t[e]:t.large?matched=t.large:t.thumbnail?matched=t.thumbnail:t.full&&(matched=t.full),matched)?_.clone(matched):{url:this.model.get("url"),width:this.model.get("width"),height:this.model.get("height"),orientation:this.model.get("orientation")}},downloadImage:function(){var e=this;wp.media.ajax({data:{action:"wpaas_stock_photos_download",filename:this.model.get("filename"),id:this.model.get("id"),nonce:this.model.get("nonces").download}}).done(function(e){var t=wp.media.frame.content.mode("browse");t.get("gallery").collection.add(e),t.get("selection").collection.add(e),wp.Uploader.queue.add(e),wp.Uploader.queue.remove(e),t.get("gallery").$("li:first .thumbnail").click()}).fail(function(){}).always(function(){e.collection.StockPhotosProps.set("importing",!1),e.toggleState(),e.$el.blur()})}});t.exports=o},{}],6:[function(e,t,i){var o=e("./image-provider-photo.js"),r=wp.media.view.AttachmentsBrowser.extend({tagName:"div",className:"image-crate attachments-browser",initialize:function(){this.createToolbar(),this.createAttachments(),this.listenTo(this.collection,"add remove reset",_.bind(this.updateContent,this)),this.createSidebar()},createAttachments:function(){this.attachments=new wp.media.view.Attachments({controller:this.controller,collection:this.collection,AttachmentView:o}),this.views.add(this.attachments),this.attachmentsNoResults=new wp.media.View({controller:this.controller,tagName:"div",className:"uploader-inline"}),this.attachmentsNoResults.$el.addClass("hidden"),this.attachmentsNoResults.$el.html('<div class="uploader-inline-content has-upload-message"><h2 class="upload-message">No Images sucka</h2></div>'),this.views.add(this.attachmentsNoResults)},createToolbar:function(){var e;e={controller:this.controller},this.toolbar=new wp.media.view.Toolbar(e),this.views.add(this.toolbar),this.toolbar.set("spinner",new wp.media.view.Spinner({priority:-60})),this.toolbar.set("filtersLabel",new wp.media.view.Label({value:"Helo",attributes:{for:"media-attachment-filters"},priority:-80}).render()),this.toolbar.set("filters",new wp.media.view.AttachmentFilters({controller:this.controller,model:this.collection.props,StockPhotosProps:this.collection.StockPhotosProps,priority:-80}).render())},createSidebar:function(){var e=this.options,t=(e.selection,this.sidebar=new wp.media.view.Sidebar({controller:this.controller}));this.views.add(t)},dispose:function(){return wp.media.View.prototype.dispose.apply(this,arguments),this},updateContent:function(){var e=this;return this.toolbar.get("spinner").show(),this.collection.length?(e.attachmentsNoResults.$el.addClass("hidden"),void e.toolbar.get("spinner").hide()):void this.collection.more().always(function(){e.collection.length?e.attachmentsNoResults.$el.addClass("hidden"):e.attachmentsNoResults.$el.removeClass("hidden"),e.toolbar.get("spinner").hide()})}});t.exports=r},{"./image-provider-photo.js":5}]},{},[2]);