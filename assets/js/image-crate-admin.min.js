!function e(t,a,i){function r(n,s){if(!a[n]){if(!t[n]){var c="function"==typeof require&&require;if(!s&&c)return c(n,!0);if(o)return o(n,!0);var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}var d=a[n]={exports:{}};t[n][0].call(d.exports,function(e){var a=t[n][1][e];return r(a?a:e)},d,d.exports,e,t,a,i)}return a[n].exports}for(var o="function"==typeof require&&require,n=0;n<i.length;n++)r(i[n]);return r}({1:[function(e,t,a){var i=wp.media.controller.Library.extend({defaults:_.defaults({id:"image-crate",title:"Image Source",multiple:!1,menu:"default",router:"image-crate",toolbar:"image-crate-toolbar",searchable:!0,filterable:!1,sortable:!1,autoSelect:!0,describe:!1,contentUserSetting:!0,syncSelection:!1,priority:800,isImageCrate:!0},wp.media.controller.Library.prototype.defaults),initialize:function(){this.get("library")||this.set("library",wp.media.query({ii:!0})),wp.media.controller.Library.prototype.initialize.apply(this,arguments)}});t.exports=i},{}],2:[function(e,t,a){var i=e("./controllers/image-crate-controller.js"),r=e("./models/image-crate-photo-model.js"),o=e("./views/browser/image-crate-photos.js"),n=wp.media.view.MediaFrame.Post.prototype.createStates,s=wp.media.view.MediaFrame.Select.prototype.bindHandlers;_.extend(wp.media.view.MediaFrame.prototype,{image_crate:{activate:function(){var e=_.first(this.views.get(".media-frame-router")),t={};t.usatoday={text:"USA Today Sports",priority:60},e.set(t),this.content.mode("usatoday")},createToolbar:function(){var e=this;this.toolbar.set(new wp.media.view.Toolbar({controller:this,items:{insert:{style:"primary",text:"Download Image",priority:80,requires:{library:!0,selection:!0},click:function(){var t=e.state(),a=t.get("selection");this.$el.attr("disabled","disabled").text("Downloading"),wp.media.ajax({data:{action:"image_crate_download",filename:a.models[0].get("filename"),id:a.models[0].get("id"),download_uri:a.models[0].get("download_uri")}}).done(function(t){var a=wp.media.frame.content.mode("browse");a.get("gallery").collection.add(t),a.get("selection").collection.add(t),wp.Uploader.queue.add(t),wp.Uploader.queue.remove(t),e.setState("insert"),a.get("gallery").$("li:first .thumbnail").click()})}}}}))},loadUSAT:function(){var e=this.state(),t=e.get("image_crate_photos"),a=e.get("selection");_.isUndefined(t)&&(t=new r(null,{props:{query:!0}}),e.set("image_crate_photos",t)),this.content.set(new o({className:"image-crate attachments-browser",controller:this,collection:t,selection:a,model:e,filters:!1,date:!1}))},loadGetty:function(){console.log("getty ready")}}}),wp.media.view.MediaFrame.Select.prototype.bindHandlers=function(){s.apply(this,arguments),this.on("router:create:image-crate",this.createRouter,this),this.on("router:activate:image-crate",this.image_crate.activate,this),this.on("router:deactivate:image-crate",this.deactivate,this),this.on("toolbar:create:image-crate-toolbar",this.image_crate.createToolbar,this),this.on("content:render:getty",this.image_crate.loadGetty,this),this.on("content:render:usatoday",this.image_crate.loadUSAT,this)},wp.media.view.MediaFrame.Post.prototype.createStates=function(){n.apply(this,arguments),this.states.add(new i)}},{"./controllers/image-crate-controller.js":1,"./models/image-crate-photo-model.js":3,"./views/browser/image-crate-photos.js":6}],3:[function(e,t,a){var i=e("./image-crate-photos-query"),r=wp.media.model.Attachments.extend({initialize:function(e,t){wp.media.model.Attachments.prototype.initialize.call(this,e,t)},_requery:function(e){var t;this.props.get("query")&&(t=this.props.toJSON(),t.cache=!0!==e,this.mirror(i.get(t)))}});t.exports=r},{"./image-crate-photos-query":4}],4:[function(e,t,a){var i=wp.media.model.Query.extend({sync:function(e,t,a){var i;return a=a||{},a.context=this,a.data=_.extend(a.data||{},{action:"image_crate_get"}),i=_.clone(this.args),-1!==i.posts_per_page&&(i.paged=Math.round(this.length/i.posts_per_page)+1),a.data.query=i,wp.media.ajax(a)}},{get:function(){var e=[];return function(t,a){var r,o=i,n={},s=!!t.cache||_.isUndefined(t.cache);return delete t.query,delete t.cache,_.each(t,function(e,t){_.isNull(e)||(n[t]=e)}),_.defaults(n,o.defaultArgs),s?r=_.find(e,function(e){return _.isEqual(e.args,n)}):e=[],r||(r=new o([],_.extend(a||{},{props:t,args:n})),e.push(r)),r}}()});t.exports=i},{}],5:[function(e,t,a){var i=wp.media.view.Attachment.extend({initialize:function(){wp.media.view.Attachment.prototype.initialize.apply(this,arguments),_.extend(this.events,{click:"imageCrateActiveMode"})},imageCrateActiveMode:function(){console.log("is dumb")},render:function(){var e=this.options||{};return"image"===e.type&&(e.size=this.imageSize("thumbnail")),wp.media.view.Attachment.prototype.render.apply(this,arguments),this}});t.exports=i},{}],6:[function(e,t,a){var i=e("./image-crate-photo.js"),r=(wp.media.view.AttachmentsBrowser.prototype.initialize,wp.media.view.AttachmentsBrowser.prototype.createSingle,wp.media.view.AttachmentsBrowser.extend({tagName:"div",className:"image-crate attachments-browser",defaults:_.defaults({filters:!1,search:!1,date:!1,display:!1,sidebar:!0,AttachmentView:i},wp.media.view.AttachmentsBrowser.prototype.defaults)}));t.exports=r},{"./image-crate-photo.js":5}]},{},[2]);