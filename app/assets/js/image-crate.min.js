!function(){function e(t,r,i){function o(a,n){if(!r[a]){if(!t[a]){var l="function"==typeof require&&require;if(!n&&l)return l(a,!0);if(s)return s(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var d=r[a]={exports:{}};t[a][0].call(d.exports,function(e){return o(t[a][1][e]||e)},d,d.exports,e,t,r,i)}return r[a].exports}for(var s="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}return e}()({1:[function(e,t,r){var i,o=wp.media.controller.Library;i=o.extend({defaults:_.defaults({id:"getty-images",title:"Getty Images",priority:300,content:"provider",router:"image-provider",toolbar:"image-provider",button:"Download Getty Image",verticalFilter:!1,waitForSearch:!0,library:wp.media.query({provider:"getty-images"})},o.prototype.defaults),activate:function(){this.set("mode",this.id)}}),t.exports=i},{}],2:[function(e,t,r){!function(t){t(function(){var t=t||{},r=wp.media.view.MediaFrame.Post;t.GettyImagesController=e("./controllers/getty-images.js"),t.ProviderAttachments=e("./models/attachments.js"),t.ProviderToolbar=e("./views/toolbars/provider.js"),t.ProviderPhotosBrowser=e("./views/browser/attachments.js"),wp.media.view.MediaFrame.Post=r.extend({createStates:function(){r.prototype.createStates.apply(this,arguments),this.states.add([new t.GettyImagesController])},bindHandlers:function(){r.prototype.bindHandlers.apply(this,arguments),this.on("toolbar:create:image-provider",this.createToolbar,this),this.on("toolbar:render:image-provider",t.ProviderToolbar,this),this.on("router:create:image-provider",this.createRouter,this),this.on("router:render:image-provider",this.providerRouter,this),this.on("content:create:provider",this.providerContent,this)},providerContent:function(e){var r=this.state(),i=r.get("id"),o=r.get("image_crate_photos"),s=r.get("selection");_.isUndefined(o)&&(o=new t.ProviderAttachments(null,{props:r.get("library").props.toJSON()}),r.set("image_crate_photos",o)),e.view=new t.ProviderPhotosBrowser({tagName:"div",className:i+" image-crate attachments-browser",controller:this,collection:o,selection:s,model:r,filters:!0,search:!0})},providerRouter:function(e){e.set({provider:{text:"Provider",priority:20}})}})})}(jQuery)},{"./controllers/getty-images.js":1,"./models/attachments.js":3,"./views/browser/attachments.js":5,"./views/toolbars/provider.js":10}],3:[function(e,t,r){var i=e("./query"),o=wp.media.model.Attachments.extend({_requery:function(e){var t;this.props.get("query")&&(t=this.props.toJSON(),t.cache=!0!==e,this.mirror(i.get(t)))}});t.exports=o},{"./query":4}],4:[function(e,t,r){var i=wp.media.model.Attachments,o=wp.media.model.Query.extend({initialize:function(e,t){var r;if((_.isUndefined(t.args.search)||_.isEmpty(t.args.search))&&t.args.waitForSearch)return!1;t=t||{},i.prototype.initialize.apply(this,arguments),this.args=t.args,this._hasMore=!0,this.created=new Date,this.filters.order=function(e){var t=this.props.get("orderby"),r=this.props.get("order");return!this.comparator||(this.length?1!==this.comparator(e,this.last(),{ties:!0}):"DESC"!==r||"date"!==t&&"modified"!==t?"ASC"===r&&"menuOrder"===t&&0===e.get(t):e.get(t)>=this.created)},r=["s","order","orderby","posts_per_page","post_mime_type","post_parent"],wp.Uploader&&_(this.args).chain().keys().difference(r).isEmpty().value()&&this.observe(wp.Uploader.queue)},sync:function(e,t,r){var o;return"read"===e?(r=r||{},r.context=this,r.data=_.extend(r.data||{},{action:"image_crate_get",_ajax_nonce:imagecrate.nonce}),o=_.clone(this.args),-1!==o.posts_per_page&&(o.paged=Math.round(this.length/o.posts_per_page)+1),r.data.query=o,wp.media.ajax(r)):(fallback=i.prototype.sync?i.prototype:Backbone,fallback.sync.apply(this,arguments))}},{get:function(){var e=[];return function(t,r){var i,s=o,a={},n=!!t.cache||_.isUndefined(t.cache);return delete t.query,delete t.cache,_.each(t,function(e,t){_.isNull(e)||(a[t]=e)}),_.defaults(a,s.defaultArgs),n?i=_.find(e,function(e){return _.isEqual(e.args,a)}):e=[],i||(i=new s([],_.extend(r||{},{props:t,args:a})),e.push(i)),i}}()});t.exports=o},{}],5:[function(e,t,r){var i,o=e("./search.js"),s=e("./no-results.js"),a=e("./no-results-search.js"),n=e("./verticals-filter.js"),l=wp.media.view.AttachmentsBrowser.prototype.initialize;i=wp.media.view.AttachmentsBrowser.extend({initialize:function(){l.apply(this,arguments),this.createToolBar(),this.createUploader(!0),this.collection.props.set("waitForSearch",this.model.get("waitForSearch"))},updateContent:function(){var e,t=this;e=t.uploader,this.collection.length?(e.$el.addClass("hidden"),t.toolbar.get("spinner").hide()):(this.toolbar.get("spinner").show(),e.$el.addClass("hidden"),this.toolbar.get("search")&&this.toolbar.get("search").$el.addClass("hidden"),this.dfd=this.collection.more().done(function(){t.collection.length?e.$el.addClass("hidden"):e.$el.removeClass("hidden"),t.toolbar.get("spinner").hide()})),this.model.get("searchable")&&this.collection.props.get("searchActive")&&this.toolbar.get("search").$el.removeClass("hidden")},createToolBar:function(){var e=this.collection.props;this.model.get("verticalFilter")&&(this.toolbar.set("VerticalsFilterLabel",new wp.media.view.Label({value:"Verticals Label",attributes:{for:"media-attachment-vertical-filters"},priority:-75}).render()),this.toolbar.set("VerticalsFilter",new n({controller:this.controller,model:this.collection.props,priority:-75}).render())),this.toolbar.unset("dateFilterLabel",{}),this.toolbar.unset("dateFilter",{}),this.toolbar.unset("search",{}),this.model.get("searchable")&&this.toolbar.set("search",new o({controller:this.controller,model:this.collection.props,searchable:this.model.get("searchable"),priority:-70}).render()),this.views.add(this.toolbar),!this.model.get("searchable")||this.collection.length||e.get("searchActive")||this.toolbar.get("search").$el.addClass("hidden")},createUploader:function(e){var t=!_.isUndefined(e);this.model.get("searchable")?this.uploader=new a({controller:this.controller,model:this.collection.props,collection:this.collection,shouldRender:t}):this.uploader=new s({controller:this.controller,model:this.collection.props,collection:this.collection}),this.uploader.$el.addClass("hidden"),this.views.add(this.uploader)}}),t.exports=i},{"./no-results-search.js":6,"./no-results.js":7,"./search.js":8,"./verticals-filter.js":9}],6:[function(e,t,r){var i=e("./search.js"),o=wp.media.View.extend({tagName:"div",className:"no-results-found",initialize:function(){this.model.on("change",this.render,this),this.collection.on("change add remove reset",_.debounce(this.render,300),this),void 0===this.model.get("search")&&this.model.set("search",""),void 0===this.model.get("searchActive")&&this.model.set("searchActive",!1)},render:function(){if(!this.options.shouldRender)return jQuery(this.el).remove(),this;if(jQuery(this.el).empty(),this.collection.length>0)return this;if(!this.model.get("searchActive")){var e=new i({controller:this.controller,model:this.collection.props}).render();return jQuery(this.el).append(jQuery('<div class="uploader-inline image-crate-no-results"><div class="uploader-inline-content"><h2 class="upload-message">Search for images</h2></div></div>')),jQuery(this.el).find(".uploader-inline-content").append(e.$el),setTimeout(function(){jQuery(".image-crate-no-results input:text").focus()},200),this}return jQuery(this.el).append(jQuery('<div class="uploader-inline image-crate-no-results"><div class="uploader-inline-content"><h2 class="upload-message">No images found. Try a different search.</h2></div></div>')),this}});t.exports=o},{"./search.js":8}],7:[function(e,t,r){var i=wp.media.View.extend({tagName:"div",className:"no-results-found",render:function(){return jQuery(this.el).empty(),jQuery(this.el).append(jQuery('<div class="uploader-inline image-crate-no-results"><div class="uploader-inline-content"><h2 class="upload-message">Sorry. No images found.</h2></div></div>')),this}});t.exports=i},{}],8:[function(e,t,r){var i=wp.media.View.extend({tagName:"form",className:"ic-search-form",events:{submit:"search"},initialize:function(){void 0===this.model.get("search")&&this.model.set("search",""),this.model.on("change",this.render,this)},render:function(){return jQuery(this.el).empty(),jQuery(this.el).append(jQuery('<input type="text" name="media-search-input" placeholder="Search images" value="'+this.model.escape("search")+'" />')),jQuery(this.el).append(jQuery('<input type="submit" class="button button-primary" value="Search" />')),this},search:function(e){e.preventDefault(),this.model.set("search",e.target[0].value),this.model.set("searchActive",!0)}});t.exports=i},{}],9:[function(e,t,r){var i=wp.media.view.AttachmentFilters.extend({id:"media-attachment-vertical-filters",createFilters:function(){var e={},t=[{vertical:"ENTERTAINMENT",text:"ENTERTAINMENT"},{vertical:"TRENDING TOPICS",text:"TRENDING TOPICS"},{vertical:"EXTRA",text:"EXTRA"},{vertical:"LOCAL",text:"LOCAL"},{vertical:"NFL",text:"NFL"},{vertical:"NBA",text:"NBA"},{vertical:"MLB",text:"MLB"},{vertical:"NHL",text:"NHL"},{vertical:"SOCCER",text:"SOCCER"},{vertical:"NCAABB",text:"NCAABB"},{vertical:"NCAAF",text:"NCAAF"},{vertical:"LIFESTYLE",text:"LIFESTYLE"}];_.each(t||{},function(t,r){e[r]={text:t.text,props:{vertical:t.vertical}}}),e.all={text:"All Verticals",props:{vertical:""},priority:10},this.filters=e}});t.exports=i},{}],10:[function(e,t,r){var i=function(e){var t=this,r=t.state();this.selectionStatusToolbar(e),e.set(r.get("id"),{style:"primary",priority:80,text:r.get("button"),requires:{selection:!0},click:function(){var e=r.get("selection"),i=r.get("id");jQuery(".media-toolbar-primary .media-button").text("Downloading...").before('<span class="image-crate-spinner spinner is-active"></span>'),wp.media.ajax({data:{action:"image_crate_download",query:{download_url:e.models[0].get("url"),provider:i,filename:e.models[0].get("filename"),id:e.models[0].get("id")},_ajax_nonce:imagecrate.nonce}}).done(function(e){t.setState("insert");var r=wp.media.frame.content.mode("browse");r.get("gallery").collection.add(e),r.get("selection").collection.add(e),r.get("insert").collection.remove(e),r.get("insert").collection.unshift(e),wp.Uploader.queue.add(e),wp.Uploader.queue.remove(e),r.get("insert").$("li:first .thumbnail").click()})}})};t.exports=i},{}]},{},[2]);